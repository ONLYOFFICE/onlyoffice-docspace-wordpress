!function(){"use strict";var e={d:function(t,o){for(var l in o)e.o(o,l)&&!e.o(t,l)&&Object.defineProperty(t,l,{enumerable:!0,get:o[l]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}};e.d({},{l:function(){return r},i:function(){return i}});var t=window.wp.element,o=window.wp.blocks,l=JSON.parse('{"name":"onlyoffice-docspace-wordpress/onlyoffice-docspace"}'),c=window.wp.blockEditor,n=window.wp.components,a=window.wp.i18n;const r={},i=(0,t.createElement)("svg",{width:"66",height:"60",viewBox:"0 0 66 60",fill:"black",xmlns:"http://www.w3.org/2000/svg"},(0,t.createElement)("path",{opacity:"0.5",fillRule:"evenodd",clipRule:"evenodd",d:"M28.9406 59.2644L2.20792 46.9066C-0.0693069 45.8277 -0.0693069 44.1604 2.20792 43.1796L11.5148 38.8642L28.8416 46.9066C31.1188 47.9854 34.7822 47.9854 36.9604 46.9066L54.2871 38.8642L63.5941 43.1796C65.8713 44.2585 65.8713 45.9258 63.5941 46.9066L36.8614 59.2644C34.7822 60.2452 31.1188 60.2452 28.9406 59.2644Z",fill:"black"}),(0,t.createElement)("path",{opacity:"0.75",fillRule:"evenodd",clipRule:"evenodd",d:"M28.9406 44.0606L2.20792 31.7028C-0.069307 30.6239 -0.069307 28.9566 2.20792 27.9758L11.3168 23.7584L28.9406 31.8989C31.2178 32.9778 34.8812 32.9778 37.0594 31.8989L54.6832 23.7584L63.7921 27.9758C66.0693 29.0547 66.0693 30.722 63.7921 31.7028L37.0594 44.0606C34.7822 45.1395 31.1188 45.1395 28.9406 44.0606Z",fill:"black"}),(0,t.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M28.9406 29.2518L2.20792 16.8939C-0.069307 15.8151 -0.069307 14.1478 2.20792 13.167L28.9406 0.809144C31.2178 -0.269715 34.8812 -0.269715 37.0594 0.809144L63.7921 13.167C66.0693 14.2458 66.0693 15.9132 63.7921 16.8939L37.0594 29.2518C34.7822 30.2325 31.1188 30.2325 28.9406 29.2518Z",fill:"black"})),{name:d}=l;(0,o.registerBlockType)(d,{icon:i,edit:({attributes:e,setAttributes:o})=>{const l=(0,c.useBlockProps)({style:r}),[d,s]=(0,t.useState)(!1),[p,m]=(0,t.useState)({}),[f,u]=(0,t.useState)(!1);(0,t.useEffect)((()=>{d&&DocSpaceComponent.renderDocSpace("oodsp-selector-frame",(function(){DocSpace.SDK.initFrame(p)}))}),[d]);const g=t=>{Object.keys(e).forEach((t=>delete e[t])),e.roomId=t[0].id,e.name=t[0].label,e.icon=t[0].icon,o(e),DocSpace.SDK.frames["oodsp-selector-frame"].destroyFrame(),s(!1)},h=t=>{Object.keys(e).forEach((t=>delete e[t])),e.fileId=t.id,e.name=t.title,e.icon=t.icon,o(e),DocSpace.SDK.frames["oodsp-selector-frame"].destroyFrame(),s(!1)},y=()=>{DocSpace.SDK.frames["oodsp-selector-frame"].destroyFrame(),s(!1)},w=e=>{const t=e.target.dataset.mode||null;var o=null;switch(t){case"room-selector":o=g;break;case"file-selector":o=h}m({frameId:"oodsp-selector-frame",title:e.target.dataset.title||"",width:"400px",height:"500px",mode:t,selectorType:"roomsOnly",locale:DocSpaceComponent.locale,events:{onSelectCallback:o,onCloseCallback:y}}),s(!0)};return(0,t.createElement)("div",{...l},e.roomId||e.fileId?(0,t.createElement)("div",null,(0,t.createElement)(c.InspectorControls,{key:"setting"},(0,t.createElement)(n.PanelBody,{title:(0,a.__)("Settings","onlyoffice-docspace-plugin")},(0,t.createElement)(c.HeightControl,{label:(0,a.__)("Width","onlyoffice-docspace-plugin"),value:e.width,onChange:e=>o({width:e})}),(0,t.createElement)(c.HeightControl,{label:(0,a.__)("Height","onlyoffice-docspace-plugin"),value:e.height,onChange:e=>o({height:e})}))),(0,t.createElement)("p",{style:{display:"flex"}},e.icon&&!f?(0,t.createElement)("img",{class:"docspace-icon",src:DocSpaceComponent.getAbsoluteUrl(e.icon),onerror:()=>u(!0)}):(0,t.createElement)("div",null,i),(0,t.createElement)("p",{style:{marginLeft:"25px"}}," ",e.name||""),(0,t.createElement)(c.BlockControls,null,(0,t.createElement)(n.ToolbarGroup,null,(0,t.createElement)(n.Dropdown,{popoverProps:{variant:"toolbar"},renderToggle:({isOpenDropdown:e,onToggle:o})=>(0,t.createElement)(n.ToolbarButton,{"aria-expanded":e,"aria-haspopup":"true",onClick:o},(0,a.__)("Replace","onlyoffice-docspace-plugin")),renderContent:({onClose:e})=>(0,t.createElement)(t.Fragment,null,(0,t.createElement)(n.NavigableMenu,null,(0,t.createElement)(n.MenuItem,{onClick:t=>{t.target.dataset.title=(0,a.__)("Select room","onlyoffice-docspace-plugin"),t.target.dataset.mode="room-selector",w(t),e()}},(0,a.__)("Room","onlyoffice-docspace-plugin")),(0,t.createElement)(n.MenuItem,{onClick:t=>{t.target.dataset.title=(0,a.__)("Select file","onlyoffice-docspace-plugin"),t.target.dataset.mode="file-selector",w(t),e()}},(0,a.__)("File","onlyoffice-docspace-plugin"))))}))))):(0,t.createElement)("div",null,(0,t.createElement)(n.Placeholder,{icon:i,label:"ONLYOFFICE DocSpace",instructions:(0,a.__)("Pick room or media file from your DocSpace","onlyoffice-docspace-plugin")},(0,t.createElement)(n.Button,{variant:"primary","data-title":(0,a.__)("Select room","onlyoffice-docspace-plugin"),"data-mode":"room-selector",onClick:w},(0,a.__)("Select room","onlyoffice-docspace-plugin")),(0,t.createElement)(n.Button,{variant:"primary","data-title":(0,a.__)("Select file","onlyoffice-docspace-plugin"),"data-mode":"file-selector",onClick:w},(0,a.__)("Select file","onlyoffice-docspace-plugin")))),d&&(0,t.createElement)(n.Modal,{onRequestClose:e=>{"onBlur"!=e._reactName&&(s(!1),DocSpace&&DocSpace.SDK.frames["oodsp-selector-frame"].destroyFrame())},title:p.title,style:{minHeight:"572px"}},(0,t.createElement)("div",{id:"oodsp-selector-frame"})))},save:({attributes:e})=>{if(!e.roomId&&!e.fileId)return"";let o="";return e.hasOwnProperty("roomId")?o+="roomId="+e.roomId+" ":e.hasOwnProperty("fileId")&&(o+="fileId="+e.fileId+" "),e.hasOwnProperty("width")&&e.width.length>0&&(o+="width="+e.width+" "),e.hasOwnProperty("height")&&e.height.length>0&&(o+="height="+e.height+" "),(0,t.createElement)(t.RawHTML,null,`[onlyoffice-docspace ${o} /]`)}})}();